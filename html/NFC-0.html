<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset = "UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel = "stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zain:ital,wght@0,200;0,300;0,400;0,700;0,800;0,900;1,300;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://use.typekit.net/apu5eah.css">
	<title> Rewoven </title>

</head>

<body>
<header>
    <a href="../index.html">
        <img class="rewoven-logo" src="../img/rewoven-logo-1.png" alt="Rewoven Logo">
      </a>
    <div class="nav-icon">
    <span class="menu-icon">menu</span>
    <a class="home-icon" href="../index.html">home</a>
        </div>
        <div class="content">
            <a href="about.html">About</a>
            <a href="form.html">Order form</a>
            <a href="how-it-works.html">How it works</a>
            <a href="process.html">Jessica's process</a>
            <a href="customert.html">Happy customers</a>
            <a href="FAQ.html">FAQ's</a>
            </div>     
<h2>Product Search</h2>
</header>

<div class="body-grid">
    <br>
    <br>
 <p class="two-column">Please enter your unqiue 6 digit product number here</p>
 <input id="search-id" name="ID" type="text" placeholder=" X X X X X X " class="two-column" required>
 <a href="NFC-1.html" class="two-column button" onclick="searchById(event)">Next</a>
 
</div>    

<!--<script src="../app.js"></script> -->
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>


<footer>
    <img class="rewoven-logo" src="../img/logo-rewoven-white.png" >
    <p class="socials-logo secondary">Follow our socials:<br>
        <a href="https://www.youtube.com/channel/UCqCOiJrG88Xx8-dNqdaxTTw"><img src="../img/youtube-logo.png" alt="youtube logo"></a>
        <a href="https://www.youtube.com/channel/UCqCOiJrG88Xx8-dNqdaxTTw"><img src="../img/rewovenInstagramLogo.png" alt="Instagram logo"></a>
        <a href="https://www.youtube.com/channel/UCqCOiJrG88Xx8-dNqdaxTTw"><img src="../img/rewovenPinterestLogo.png" alt="Pinterest logo"></a>
    </p>
        <a class="col-1" href="about.html">About</a>
        <a class="col-2"  href="form.html">Order form</a></span></a>
        <a class="col-1" href="how-it-works.html">How it works</a>
        <a class="col-2" href="process.html">Jessica's process</a>
        <a class="col-1" href="customert.html">Our happy customers</a>
        <a class="col-2" href="FAQ.html">FAQ's</a>
</footer>


<script>
    function searchById(event) {
        event.preventDefault(); // Prevent instant navigation

        let searchId = document.getElementById("search-id").value;
        if (!searchId) {
            alert("Please enter a valid ID.");
            return;
        }

        let apiUrl = "https://script.google.com/macros/s/AKfycbynEm5l54q90rKbU3dC_PC0ySdTA22L_8BsuOCvRxscLnu16x5fTgdF5LO7Fc58MTM9/exec?id=" + searchId;

        fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
        console.log("API Response:", data); // Debugging log

        if (data.result === "not found") {
            alert("ID not found. Try again.");
        } else {
            // Ensure consistent field names
            console.log("Storing data:", {
                searchedName: data.Name, 
                waterGal: data.waterGal, 
                waterSink: data.waterSink,
                co2Kg: data.co2Kg,
                co2Drive: data.co2Drive,
                Reused: data.Reused
            });

            localStorage.setItem("searchedName", data.Name || "");
            localStorage.setItem("waterGal", data.waterGal || "Not available");
            localStorage.setItem("waterSink", data.waterSink || "Not available");
            localStorage.setItem("co2Kg", data.co2Kg || "Not available");
            localStorage.setItem("co2Drive", data.co2Drive || "Not available");
            localStorage.setItem("Reused", data.Reused || "Not available");

            console.log("Stored in localStorage:", localStorage); // Debugging log

            window.location.href = "NFC-1.html";
        }
    })
    .catch(error => {
        alert("Error fetching data.");
        console.error("Error:", error);
    });



    }
</script>

</body>

</html>